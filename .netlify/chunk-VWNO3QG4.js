import{a as W}from"./chunk-MCZFIFGI.js";import{b as V,c as j,d as N,e as q,f as z,g as B,n as G,p as A,r as H}from"./chunk-4L7TKHLH.js";import{e as L,g as R,h as I,k as T}from"./chunk-L6NTJRNO.js";import{$ as b,Da as o,Ea as x,Pa as h,Sa as d,Xa as e,Ya as t,Yb as E,Za as m,ab as _,bb as P,cb as c,fc as k,ha as g,ia as w,ja as l,jb as i,ka as p,kb as M,pb as v,qb as S,rb as y,tb as C}from"./chunk-WKEOFE6Q.js";function F(r,u){if(r&1&&(e(0,"div",25)(1,"div",15),l(),e(2,"svg",26),m(3,"path",27),t(),p(),e(4,"div",18)(5,"p",28),i(6),t()()()()),r&2){let n=c(2);o(6),M(n.errorMessage)}}function D(r,u){r&1&&(e(0,"span"),i(1,"Reset Password"),t())}function Y(r,u){r&1&&(e(0,"span",29),l(),e(1,"svg",30),m(2,"circle",31)(3,"path",32),t(),i(4," Resetting... "),t())}function O(r,u){if(r&1){let n=_();e(0,"form",8),P("ngSubmit",function(){g(n);let s=c();return w(s.resetPassword())}),e(1,"div")(2,"label",9),i(3," New Password "),t(),e(4,"input",10),y("ngModelChange",function(s){g(n);let f=c();return S(f.newPassword,s)||(f.newPassword=s),w(s)}),t(),e(5,"p",11),i(6,"Must be at least 8 characters"),t()(),e(7,"div")(8,"label",12),i(9," Confirm New Password "),t(),e(10,"input",13),y("ngModelChange",function(s){g(n);let f=c();return S(f.confirmPassword,s)||(f.confirmPassword=s),w(s)}),t()(),e(11,"div",14)(12,"div",15),l(),e(13,"svg",16),m(14,"path",17),t(),p(),e(15,"div",18)(16,"h3",19),i(17,"Password Requirements"),t(),e(18,"ul",20)(19,"li"),i(20,"At least 8 characters long"),t(),e(21,"li"),i(22,"Include uppercase and lowercase letters"),t(),e(23,"li"),i(24,"Include at least one number"),t(),e(25,"li"),i(26,"Include at least one special character"),t()()()()(),h(27,F,7,1,"div",21),e(28,"button",22),h(29,D,2,0,"span",23)(30,Y,5,0,"span",24),t()()}if(r&2){let n=c();o(4),v("ngModel",n.newPassword),o(6),v("ngModel",n.confirmPassword),o(17),d("ngIf",n.errorMessage),o(),d("disabled",n.isLoading),o(),d("ngIf",!n.isLoading),o(),d("ngIf",n.isLoading)}}function J(r,u){r&1&&(e(0,"div",33)(1,"div",34),l(),e(2,"svg",35),m(3,"path",36),t()(),p(),e(4,"h3",37),i(5,"Password Reset Successfully!"),t(),e(6,"p",38),i(7," Your password has been reset. You can now log in with your new password. "),t(),e(8,"div",39)(9,"a",40),i(10," Go to Login "),t()()())}function K(r,u){r&1&&(e(0,"div",33)(1,"div",41),l(),e(2,"svg",42),m(3,"path",43),t()(),p(),e(4,"h3",37),i(5,"Invalid or Expired Link"),t(),e(6,"p",38),i(7," This password reset link is invalid or has expired. Please request a new one. "),t(),e(8,"div",39)(9,"a",44),i(10," Request New Reset Link "),t()()())}var ie=(()=>{class r{constructor(n,a,s){this.route=n,this.router=a,this.authService=s,this.newPassword="",this.confirmPassword="",this.isLoading=!1,this.errorMessage="",this.resetSuccess=!1,this.invalidToken=!1,this.token=""}ngOnInit(){this.token=this.route.snapshot.queryParams.token,this.token||(this.invalidToken=!0)}resetPassword(){if(this.newPassword!==this.confirmPassword){this.errorMessage="Passwords do not match";return}if(this.newPassword.length<8){this.errorMessage="Password must be at least 8 characters";return}this.isLoading=!0,this.errorMessage="",this.authService.resetPassword(this.token,this.newPassword).subscribe(n=>{this.isLoading=!1,n.success?this.resetSuccess=!0:(this.errorMessage=n.message,(n.message.includes("invalid")||n.message.includes("expired"))&&(this.invalidToken=!0))})}static{this.\u0275fac=function(a){return new(a||r)(x(L),x(R),x(W))}}static{this.\u0275cmp=b({type:r,selectors:[["app-reset-password"]],standalone:!0,features:[C],decls:11,vars:3,consts:[[1,"min-h-screen","bg-gray-50","flex","flex-col","justify-center","py-12","sm:px-6","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-md"],[1,"text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],[1,"mt-8","sm:mx-auto","sm:w-full","sm:max-w-md"],[1,"bg-white","py-8","px-4","shadow","sm:rounded-lg","sm:px-10"],["class","space-y-6",3,"ngSubmit",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"space-y-6",3,"ngSubmit"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","required","","minlength","8",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-green-500","focus:border-green-500",3,"ngModelChange","ngModel"],[1,"mt-1","text-xs","text-gray-500"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-green-500","focus:border-green-500",3,"ngModelChange","ngModel"],[1,"rounded-md","bg-blue-50","p-4"],[1,"flex"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-blue-400"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","font-medium","text-blue-800"],[1,"mt-1","text-sm","text-blue-700","list-disc","list-inside"],["class","rounded-md bg-red-50 p-4",4,"ngIf"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-green-600","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"rounded-md","bg-red-50","p-4"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm","text-red-800"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-green-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mt-4","text-lg","font-medium","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"mt-6"],["routerLink","/login",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-green-600","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["routerLink","/forgot-password",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-green-600","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500"]],template:function(a,s){a&1&&(e(0,"div",0)(1,"div",1)(2,"h2",2),i(3," Reset Your Password "),t(),e(4,"p",3),i(5," Enter your new password below "),t()(),e(6,"div",4)(7,"div",5),h(8,O,31,6,"form",6)(9,J,11,0,"div",7)(10,K,11,0,"div",7),t()()()),a&2&&(o(8),d("ngIf",!s.resetSuccess),o(),d("ngIf",s.resetSuccess),o(),d("ngIf",s.invalidToken))},dependencies:[k,E,H,B,V,j,N,G,A,z,q,T,I],encapsulation:2})}}return r})();export{ie as ResetPasswordComponent};
