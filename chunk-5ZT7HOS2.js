import{F as n,R as f,a,b as l,k as u,n as s,r as i}from"./chunk-WKEOFE6Q.js";var S=(()=>{class r{constructor(){this.currentUserSubject=new u(null),this.currentUser$=this.currentUserSubject.asObservable(),this.notificationsSubject=new u([]),this.notifications$=this.notificationsSubject.asObservable();let e=localStorage.getItem("currentUser");e&&(this.currentUserSubject.next(JSON.parse(e)),this.loadUserNotifications())}login(e){return s(null).pipe(n(1e3),i(()=>{if(e.email==="demo@jobclass.com"&&e.password==="demo123"){let t={id:"1",email:e.email,name:"John Doe",role:"jobseeker",avatar:"https://ui-avatars.com/api/?name=John+Doe&background=22c55e&color=fff",location:"New York, NY",bio:"Experienced software developer looking for new opportunities",savedJobs:[],appliedJobs:[],createdAt:new Date};return this.currentUserSubject.next(t),localStorage.setItem("currentUser",JSON.stringify(t)),this.loadUserNotifications(),{success:!0,user:t}}else if(e.email==="employer@jobclass.com"&&e.password==="employer123"){let t={id:"2",email:e.email,name:"Jane Smith",role:"employer",company:"TechCorp Solutions",avatar:"https://ui-avatars.com/api/?name=Jane+Smith&background=4f46e5&color=fff",location:"San Francisco, CA",createdAt:new Date};return this.currentUserSubject.next(t),localStorage.setItem("currentUser",JSON.stringify(t)),this.loadUserNotifications(),{success:!0,user:t}}return{success:!1,error:"Invalid email or password"}}))}register(e){return s(null).pipe(n(1e3),i(()=>{let t={id:Date.now().toString(),email:e.email,name:e.name,role:e.role,company:e.company,avatar:`https://ui-avatars.com/api/?name=${e.name.replace(" ","+")}&background=22c55e&color=fff`,savedJobs:[],appliedJobs:[],createdAt:new Date};return this.currentUserSubject.next(t),localStorage.setItem("currentUser",JSON.stringify(t)),this.addNotification({id:Date.now().toString(),type:"system",title:"Welcome to JobClass!",message:"Your account has been created successfully. Start exploring job opportunities!",read:!1,createdAt:new Date}),{success:!0,user:t}}))}logout(){this.currentUserSubject.next(null),this.notificationsSubject.next([]),localStorage.removeItem("currentUser"),localStorage.removeItem("notifications")}isLoggedIn(){return this.currentUser$.pipe(i(e=>!!e))}getCurrentUser(){return this.currentUserSubject.value}updateProfile(e){let t=this.currentUserSubject.value;if(t){let o=a(a({},t),e);return this.currentUserSubject.next(o),localStorage.setItem("currentUser",JSON.stringify(o)),s(o).pipe(n(500))}throw new Error("No user logged in")}loadUserNotifications(){let e=localStorage.getItem("notifications");e?this.notificationsSubject.next(JSON.parse(e)):this.generateMockNotifications()}generateMockNotifications(){let e=[{id:"1",type:"job_alert",title:"New Job Match",message:"5 new jobs match your preferences",read:!1,createdAt:new Date(Date.now()-72e5)},{id:"2",type:"application_status",title:"Application Viewed",message:"Your application for Senior Developer at TechCorp was viewed",read:!1,createdAt:new Date(Date.now()-864e5),jobId:"1"},{id:"3",type:"message",title:"New Message",message:"You have received a message from a recruiter",read:!0,createdAt:new Date(Date.now()-1728e5)}];this.notificationsSubject.next(e),localStorage.setItem("notifications",JSON.stringify(e))}addNotification(e){let t=this.notificationsSubject.value,o=[e,...t];this.notificationsSubject.next(o),localStorage.setItem("notifications",JSON.stringify(o))}markNotificationAsRead(e){let o=this.notificationsSubject.value.map(c=>c.id===e?l(a({},c),{read:!0}):c);this.notificationsSubject.next(o),localStorage.setItem("notifications",JSON.stringify(o))}getUnreadNotificationCount(){return this.notifications$.pipe(i(e=>e.filter(t=>!t.read).length))}clearAllNotifications(){this.notificationsSubject.next([]),localStorage.removeItem("notifications")}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{S as a};
